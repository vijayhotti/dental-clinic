container_commands:
  01_init_db:
    command: |
      echo "Starting database initialization..."
      cd /var/app/current
      source /var/app/venv/*/bin/activate
      python3 -c "from app import app, init_db; print('Initializing database...'); init_db(); print('Database initialization complete.')"
      if [ -f /var/app/current/instance/dental_clinic.db ]; then
        echo "Database file created successfully at /var/app/current/instance/dental_clinic.db"
      else
        echo "ERROR: Database file not created at /var/app/current/instance/dental_clinic.db"
      fi
      echo "Database initialization command completed."
    leader_only: true 